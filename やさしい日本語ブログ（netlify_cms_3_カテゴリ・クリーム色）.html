<!--
プロジェクト: やさしい日本語ブログ（Netlify CMS）
カラー: クリーム基調
説明: これには以下のファイルが含まれます。

- index.html               ← トップページ（カード写真・アイコン）
- styles.css              ← 共通スタイル（クリーム色テーマ、レスポンシブ）
- /blog/<slug>.html       ← 記事テンプレ（ビルド後に記事ごとに生成）
- /admin/index.html       ← Netlify CMS 管理画面入口（CDNで netlify-cms を読み込み）
- /admin/config.yml       ← Netlify CMS の設定（3カテゴリ collection）
- cms-preview.js          ← Netlify CMS のプレビュースクリプト（やさしい日本語チェックを実行）

このテキストファイルは1つのHTMLコードドキュメントとして表示されます。
各ファイルは「--- FILE: filename ---」で区切ってあります。

使い方の流れ（ざっくり）:
1) GitHub リポジトリを作成し、このファイル群をアップロード
2) Netlify にリポジトリをつなげてビルド（静的サイト）
3) Netlify のサイト設定で "Identity" と "Git Gateway" を有効化 or GitHub OAuth を設定して管理者ログインを許可
4) /admin/ にアクセスして記事を追加

注意: 本雛形は静的サイトジェネレータ（Hugo, Eleventy など）へ組み込むか、ビルド時に記事を生成する前提のシンプルな構成です。

-->

--- FILE: index.html ---
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>やさしい 日本語で 書く ブログ</title>
  <link rel="stylesheet" href="/styles.css">
  <meta name="description" content="けがや病気、介護、その他のやさしい日本語ブログ">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1>やさしい日本語のホームページ</h1>
      <p class="lead">けがや病気・介護・暮らしのはなしを、やさしい日本語で。</p>
      <nav>
        <a class="btn" href="/admin/">管理画面（記事を書く）</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="cards">
      <article class="card">
        <img class="card-img" src="https://images.unsplash.com/photo-1537368910025-700350fe46c7?w=1200&q=80&auto=format&fit=crop" alt="病院の写真">
        <div class="card-body">
          <h2>🏥 けがや病気のはなし</h2>
          <p>病気やけがのときにどうするか、やさしく書いています。病院へ行くときの準備もわかります。</p>
          <a class="card-link" href="/blog/illness/">見る</a>
        </div>
      </article>

      <article class="card">
        <img class="card-img" src="https://images.unsplash.com/photo-1582719478176-6c2a6e3d2d55?w=1200&q=80&auto=format&fit=crop" alt="介護の写真">
        <div class="card-body">
          <h2>🤝 介護のはなし</h2>
          <p>介護のやり方や、使えるサービスの使い方を、かんたんに説明します。</p>
          <a class="card-link" href="/blog/care/">見る</a>
        </div>
      </article>

      <article class="card">
        <img class="card-img" src="https://images.unsplash.com/photo-1519681393784-d120267933ba?w=1200&q=80&auto=format&fit=crop" alt="本やイベントの写真">
        <div class="card-body">
          <h2>📚 その他のはなし</h2>
          <p>地域のイベントやおすすめの本など、日常の役立つ情報をまとめます。</p>
          <a class="card-link" href="/blog/other/">見る</a>
        </div>
      </article>
    </section>

    <section class="about">
      <h3>このサイトについて</h3>
      <p>このサイトは、むずかしい言葉を使わず、だれでも読める文章をめざします。記事は管理画面からかんたんに追加できます。</p>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>© 2025 やさしい日本語のホームページ</small>
    </div>
  </footer>

</body>
</html>

--- FILE: styles.css ---
/* クリーム色基調のやさしいデザイン */
:root{
  --cream: #FFF6EA;
  --accent: #D8BBA6; /* 落ち着いたアカンテ */
  --text: #333333;
  --muted: #666666;
  --card-shadow: 0 6px 18px rgba(0,0,0,0.06);
  --radius: 14px;
  --max-width: 980px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;padding:0;
  font-family: 'Noto Sans JP', system-ui, -apple-system, 'Hiragino Kaku Gothic ProN', 'Yu Gothic', 'Meiryo', sans-serif;
  background: linear-gradient(180deg,var(--cream),#FFF);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
}
.container{max-width:var(--max-width);margin:0 auto;padding:20px}
.site-header{padding:28px 0}
.site-header h1{margin:0;font-size:1.6rem}
.lead{margin-top:6px;color:var(--muted)}
nav .btn{display:inline-block;margin-top:10px;padding:8px 12px;background:var(--accent);color:white;border-radius:8px;text-decoration:none}

.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px;margin-top:22px}
.card{background:white;border-radius:var(--radius);overflow:hidden;box-shadow:var(--card-shadow);display:flex;flex-direction:column}
.card-img{width:100%;height:160px;object-fit:cover}
.card-body{padding:14px}
.card-body h2{margin:0 0 8px 0;font-size:1.1rem}
.card-body p{margin:0 0 12px 0;color:var(--muted)}
.card-link{display:inline-block;padding:8px 10px;border-radius:8px;text-decoration:none;background:rgba(0,0,0,0.06);color:var(--text)}

.about{margin-top:28px;padding:16px;background:rgba(255,255,255,0.7);border-radius:12px}
.site-footer{padding:18px 0;color:var(--muted);text-align:center;margin-top:30px}

/* 記事ページ用 */
.article-container{max-width:720px;margin:24px auto;padding:18px;background:white;border-radius:12px;box-shadow:var(--card-shadow)}
.article-container h1{margin-top:0}
.article-meta{color:var(--muted);font-size:0.9rem;margin-bottom:12px}
.article-body p{line-height:1.9;font-size:1.05rem}
.highlight-difficult{background:rgba(255,215,160,0.6);border-radius:4px;padding:0 4px}

/* レスポンシブ */
@media (max-width:600px){
  .card-img{height:140px}
  body{padding:6px}
}

--- FILE: admin/index.html ---
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>管理画面 — やさしい日本語ブログ</title>
  <!-- Netlify CMS (CDN) -->
  <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>
</head>
<body>
  <script>
    // Netlify CMS は /admin/config.yml を読み込みます。
    // 追加のプレビューやウィジェットは cms-preview.js で設定します。
  </script>
  <script src="/cms-preview.js"></script>
</body>
</html>

--- FILE: admin/config.yml ---
backend:
  name: git-gateway # Netlify Identity + Git Gateway か、github を使う
  branch: main

media_folder: "static/uploads"
public_folder: "/uploads"

locale: "ja"

collections:
  - name: "illness"
    label: "けがや病気のはなし"
    folder: "content/illness"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - {label: "タイトル", name: "title", widget: "string"}
      - {label: "表示日", name: "date", widget: "datetime"}
      - {label: "画像", name: "thumbnail", widget: "image", required: false}
      - {label: "カテゴリ", name: "category", widget: "hidden", default: "illness"}
      - {label: "本文", name: "body", widget: "markdown"}

  - name: "care"
    label: "介護のはなし"
    folder: "content/care"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - {label: "タイトル", name: "title", widget: "string"}
      - {label: "表示日", name: "date", widget: "datetime"}
      - {label: "画像", name: "thumbnail", widget: "image", required: false}
      - {label: "カテゴリ", name: "category", widget: "hidden", default: "care"}
      - {label: "本文", name: "body", widget: "markdown"}

  - name: "other"
    label: "その他のはなし"
    folder: "content/other"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - {label: "タイトル", name: "title", widget: "string"}
      - {label: "表示日", name: "date", widget: "datetime"}
      - {label: "画像", name: "thumbnail", widget: "image", required: false}
      - {label: "カテゴリ", name: "category", widget: "hidden", default: "other"}
      - {label: "本文", name: "body", widget: "markdown"}

--- FILE: cms-preview.js ---
// Netlify CMS のプレビューテンプレートと簡易「やさしい日本語チェック」
// 管理画面のプレビューで難しい語にハイライトを入れます。

(function() {
  if (!window.CMS) return;

  // 単語リスト（例）: 実際はもっと増やしてください。
  const difficultWords = [
    '診断', '症状', '感染', '処置', '予防接種', '手術', '介護保険', '医療機関', 'リスク', 'サポート'
  ];

  function highlightDifficult(html) {
    // 簡易実装：難しい単語を見つけてマークアップで囲む
    difficultWords.forEach(word => {
      const re = new RegExp('(' + word + ')', 'g');
      html = html.replace(re, '<span class="highlight-difficult">$1</span>');
    });
    return html;
  }

  // Markdown のプレビューをカスタマイズ
  const MarkdownPreview = function({entry, widgetFor}) {
    const data = entry.getIn(['data']).toJS();
    const title = data.title || '';
    const date = data.date || '';
    const body = widgetFor('body') || '';

    // widgetFor('body') は HTML 文字列のことが多い
    const bodyHtml = highlightDifficult(body);

    return (`\n      <div class="article-container">\n        <h1>${title}</h1>\n        <div class="article-meta">${date}</div>\n        <div class="article-body">${bodyHtml}</div>\n      </div>\n    `);
  };

  // 登録
  window.CMS.registerPreviewTemplate('illness', MarkdownPreview);
  window.CMS.registerPreviewTemplate('care', MarkdownPreview);
  window.CMS.registerPreviewTemplate('other', MarkdownPreview);

})();

--- FILE: README.md ---
# やさしい日本語ブログ（Netlify CMS 雛形）

## 概要
- トップページはカード型で写真・アイコンつき
- 管理画面（Netlify CMS）から3つのカテゴリで記事を投稿
- プレビュー時に簡易“やさしい日本語チェック”で難しい語にハイライト

## セットアップ手順（簡易）
1. GitHub リポジトリを作る。`main` ブランチを使うことを想定しています。
2. このファイル群をリポジトリのルートに配置する。
   - `index.html`, `styles.css`, `admin/`, `cms-preview.js`, `content/` フォルダなど
3. Netlify にリポジトリをつなぐ。
4. Netlify のダッシュボードで「Identity」を有効にし、Git Gateway を設定。もしくは GitHub OAuth を使用します。
5. /admin/ にアクセスすると Netlify CMS が立ち上がります。

## 注意点と次のステップ（推奨）
- 本雛形は記事を静的サイトとして出力する想定です。実際の運用では Hugo や Eleventy、Next.js 等に組み込むのが便利です。
- "やさしい日本語チェック" は簡易なクライアント側ハイライトです。本格的にするなら、辞書を充実させたり、形態素解析を導入してください。
- 画像は `content/<category>/` にアップされ、ビルドツールが必要ならパスを調整してください。

---

<!-- End of project files -->
